%=======================================================================%
% [Euler] intrinsic (relative) transformation (z-y'-z")
%=======================================================================%
\newcommand{\tdsetzyzrel}{
\renewcommand{\tdplotcalctransformrotmain}{
%-----------------------------------------------------------------------%
% calculate sin and cos from all angles
%-----------------------------------------------------------------------%
\tdplotsinandcos{\sa}{\ca}{\tdplotalpha} 
\tdplotsinandcos{\sb}{\cb}{\tdplotbeta}
\tdplotsinandcos{\sg}{\cg}{\tdplotgamma}
%-----------------------------------------------------------------------%
% calculate all possible multiplications of sin/cos in a,b,g
%-----------------------------------------------------------------------%
\tdplotmult{\sasb}{\sa}{\sb}
\tdplotmult{\sacb}{\sa}{\cb}
\tdplotmult{\casb}{\ca}{\sb}
\tdplotmult{\cacb}{\ca}{\cb}
%-----------------------------------------------------------------------%
\tdplotmult{\sasg}{\sa}{\sg}
\tdplotmult{\sacg}{\sa}{\cg}
\tdplotmult{\casg}{\ca}{\sg}
\tdplotmult{\cacg}{\ca}{\cg}
%-----------------------------------------------------------------------%
\tdplotmult{\sbsg}{\sb}{\sg}
\tdplotmult{\sbcg}{\sb}{\cg}
\tdplotmult{\cbsg}{\cb}{\sg}
\tdplotmult{\cbcg}{\cb}{\cg}
%-----------------------------------------------------------------------%
\tdplotmult{\sasbsg}{\sasb}{\sg}
\tdplotmult{\sasbcg}{\sasb}{\cg}
\tdplotmult{\sacbsg}{\sacb}{\sg}
\tdplotmult{\sacbcg}{\sacb}{\cg}
\tdplotmult{\casbsg}{\casb}{\sg}
\tdplotmult{\casbcg}{\casb}{\cg}
\tdplotmult{\cacbsg}{\cacb}{\sg}
\tdplotmult{\cacbcg}{\cacb}{\cg}
%-----------------------------------------------------------------------%
% define rotation matrix according to z-y'-z"-convention
% source: https://en.wikipedia.org/wiki/Euler_angles#Rotation_matrix
%-----------------------------------------------------------------------%
\pgfmathsetmacro{\raaeul}{\cacbcg - \sasg}
\pgfmathsetmacro{\rabeul}{-\sacg - \cacbsg}
\pgfmathsetmacro{\raceul}{\casb}
\pgfmathsetmacro{\rbaeul}{\casg + \sacbcg}
\pgfmathsetmacro{\rbbeul}{\cacg - \sacbsg}
\pgfmathsetmacro{\rbceul}{\sasb}
\pgfmathsetmacro{\rcaeul}{-\sbcg}
\pgfmathsetmacro{\rcbeul}{\sbsg}
\pgfmathsetmacro{\rcceul}{\cb}
%-----------------------------------------------------------------------%
}}

%=======================================================================%
% [Euler] extrinsic (absolute) transformation (z-y-z)
%=======================================================================%
\newcommand{\tdsetzyzabs}{
\renewcommand{\tdplotcalctransformrotmain}{
%-----------------------------------------------------------------------%
% calculate sin and cos from all angles
%-----------------------------------------------------------------------%
\tdplotsinandcos{\sa}{\ca}{\tdplotalpha} 
\tdplotsinandcos{\sb}{\cb}{\tdplotbeta}
\tdplotsinandcos{\sg}{\cg}{\tdplotgamma}
%-----------------------------------------------------------------------%
% calculate all possible multiplications of sin/cos in a,b,g
%-----------------------------------------------------------------------%
\tdplotmult{\sasb}{\sa}{\sb}
\tdplotmult{\sacb}{\sa}{\cb}
\tdplotmult{\casb}{\ca}{\sb}
\tdplotmult{\cacb}{\ca}{\cb}
%-----------------------------------------------------------------------%
\tdplotmult{\sasg}{\sa}{\sg}
\tdplotmult{\sacg}{\sa}{\cg}
\tdplotmult{\casg}{\ca}{\sg}
\tdplotmult{\cacg}{\ca}{\cg}
%-----------------------------------------------------------------------%
\tdplotmult{\sbsg}{\sb}{\sg}
\tdplotmult{\sbcg}{\sb}{\cg}
\tdplotmult{\cbsg}{\cb}{\sg}
\tdplotmult{\cbcg}{\cb}{\cg}
%-----------------------------------------------------------------------%
\tdplotmult{\sasbsg}{\sasb}{\sg}
\tdplotmult{\sasbcg}{\sasb}{\cg}
\tdplotmult{\sacbsg}{\sacb}{\sg}
\tdplotmult{\sacbcg}{\sacb}{\cg}
\tdplotmult{\casbsg}{\casb}{\sg}
\tdplotmult{\casbcg}{\casb}{\cg}
\tdplotmult{\cacbsg}{\cacb}{\sg}
\tdplotmult{\cacbcg}{\cacb}{\cg}
%-----------------------------------------------------------------------%
% define rotation matrix according to z-y-z-convention
% extrinsic matrix = intrinsic matrix transposed and with negative angles
%-----------------------------------------------------------------------%
\pgfmathsetmacro{\raaeul}{\cacbcg - \sasg}
\pgfmathsetmacro{\rabeul}{-\casg - \sacbcg}
\pgfmathsetmacro{\raceul}{\sbcg}
\pgfmathsetmacro{\rbaeul}{\sacg + \cacbsg}
\pgfmathsetmacro{\rbbeul}{\cacg - \sacbsg}
\pgfmathsetmacro{\rbceul}{\sbsg}
\pgfmathsetmacro{\rcaeul}{-\casb}
\pgfmathsetmacro{\rcbeul}{\sasb}
\pgfmathsetmacro{\rcceul}{\cb}
%-----------------------------------------------------------------------%
}}
